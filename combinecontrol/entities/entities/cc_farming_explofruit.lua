AddCSLuaFile(); ENT.Base = "base_anim";ENT.Type = "anim";ENT.Category		= "CENERGY Machines"ENT.PrintName		= "Farming: Explofruit";ENT.Author			= "Matt";ENT.Contact			= "";ENT.Purpose			= "";ENT.Instructions	= "";ENT.Spawnable			= true;ENT.AdminSpawnable		= true;ENT.AutomaticFrameAdvance	= true;function ENT:PostEntityPaste( ply, ent, tab )		GAMEMODE:LogSecurity( ply:SteamID(), "n/a", ply:VisibleRPName(), "Tried to duplicate " .. ent:GetClass() .. "!" );	ent:Remove();	endfunction ENT:Initialize()		self:SetModel( "models/mosi/fnv/props/plants/barrelcactus.mdl" );		if( SERVER ) then				self.FruitHealth = 20;		self:PhysicsInit( SOLID_BBOX );		self:SetMoveType( MOVETYPE_VPHYSICS );		self:SetSolid( SOLID_BBOX );				local phys = self:GetPhysicsObject();				if( phys and phys:IsValid() ) then						phys:EnableMotion( false );					end				self:SetUseType( SIMPLE_USE );			end	endfunction ENT:Use( ply )		if( SERVER ) then				if( !ply:CanTakeItem( "exploctusfruit" ) ) then										net.Start( "nCombineRationTooHeavy" );					net.Send( ply );					return;									end		if( (ply:Botanism()) + ( ply:BotanismBuff()) < 0 ) thennet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 0, 0 ) ); net.WriteString( "[NEGATIVE SKILL]: I can't do this."  ); net.Send( ply ); return end		ply:SetBotanism( math.Clamp( ply:Botanism() + GAMEMODE:ScaledStatIncrease( ply, ply:Botanism() ) * 0.5, 0, 100 ) );		ply:UpdateCharacterField( "StatBotanism", tostring( ply:Botanism() ), true );				self:EmitSound( Sound( "vj_gib/bones_snapping3.wav" ) );				if ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- GET DIRTYnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: I've gotten dirty."  ); net.Send( ply );	if (ply:HasOddity ("statusdirty")) then elseply:GiveOddity("statusdirty" ); endply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); endif ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- GET DIRTYnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: Ouch, I've touched the prick."  ); net.Send( ply );	local dmg = DamageInfo(); dmg:SetAttacker( ply ); dmg:SetDamage( 10 ); dmg:SetDamageType( DMG_SLASH ); dmg:SetInflictor( ply ); ply:TakeDamageInfo( dmg );ply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); endif ( math.random(1, 4 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- GET DIRTYnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: OH NO-- I DROPPED THE EXPLOCTUS!"  ); net.Send( ply );	local dmg = DamageInfo(); dmg:SetAttacker( ply ); dmg:SetDamage( 10 ); dmg:SetDamageType( DMG_BURN ); dmg:SetInflictor( ply ); ply:TakeDamageInfo( dmg );	local explo = ents.Create( "env_explosion" );					explo:SetOwner( self );					explo:SetPos( self:GetPos() );					explo:SetKeyValue( "iMagnitude", "50" );					explo:SetKeyValue( "iRadiusOverride", "50" );					explo:Spawn();					explo:Activate();					explo:Fire( "Explode" );ply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); end										if ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- BURN FOODnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: Shit, I've harvested it wrong and wasted resources."  ); net.Send( ply );		self:Remove();	ply:GiveItem( "steelgrowseed" );ply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); return end										ply:GiveItem( "exploctusfruit" );			self:Remove();	end	endfunction ENT:CanPhysgun()		return false;	endfunction ENT:OnTakeDamage( dmginfo )		self:TakePhysicsDamage( dmginfo );			self.FruitHealth = self.FruitHealth - dmginfo:GetDamage();		if( self.FruitHealth <= 0 ) then								self:Remove();			local explo = ents.Create( "env_explosion" );					explo:SetOwner( self );					explo:SetPos( self:GetPos() );					explo:SetKeyValue( "iMagnitude", "50" );					explo:SetKeyValue( "iRadiusOverride", "50" );					explo:Spawn();					explo:Activate();					explo:Fire( "Explode" );								end	end		function nCombineRationTooHeavy( len )				GAMEMODE:AddChat( Color( 200, 0, 0, 255 ), "CombineControl.ChatNormal", "That's too heavy for you to carry.", { CB_ALL, CB_IC } );			end	net.Receive( "nCombineRationTooHeavy", nCombineRationTooHeavy );