AddCSLuaFile(); ENT.Base = "base_anim";ENT.Type = "anim";ENT.Category		= "CENERGY Machines"ENT.PrintName		= "Farming: Smokeleaf";ENT.Author			= "Matt";ENT.Contact			= "";ENT.Purpose			= "";ENT.Instructions	= "";ENT.Spawnable			= true;ENT.AdminSpawnable		= true;ENT.AutomaticFrameAdvance	= true;function ENT:PostEntityPaste( ply, ent, tab )		GAMEMODE:LogSecurity( ply:SteamID(), "n/a", ply:VisibleRPName(), "Tried to duplicate " .. ent:GetClass() .. "!" );	ent:Remove();	endfunction ENT:Initialize()		self:SetModel( "models/mosi/fnv/props/plants/coyotetobacco.mdl" );		if( SERVER ) then				self.FruitHealth = 20;		self:PhysicsInit( SOLID_BBOX );		self:SetMoveType( MOVETYPE_VPHYSICS );		self:SetSolid( SOLID_BBOX );				local phys = self:GetPhysicsObject();				if( phys and phys:IsValid() ) then						phys:EnableMotion( false );					end				self:SetUseType( SIMPLE_USE );			end	endfunction ENT:Use( ply )		if( SERVER ) then				if( !ply:CanTakeItem( "smokeleaf" ) ) then										net.Start( "nCombineRationTooHeavy" );					net.Send( ply );					return;									end		if( (ply:Botanism()) + ( ply:BotanismBuff()) < 0 ) thennet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 0, 0 ) ); net.WriteString( "[NEGATIVE SKILL]: I can't do this."  ); net.Send( ply ); return end		ply:SetBotanism( math.Clamp( ply:Botanism() + GAMEMODE:ScaledStatIncrease( ply, ply:Botanism() ) * 0.5, 0, 100 ) );		ply:UpdateCharacterField( "StatBotanism", tostring( ply:Botanism() ), true );				self:EmitSound( Sound( "vj_gib/bones_snapping3.wav" ) );				if ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- GET DIRTYnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: I've gotten dirty."  ); net.Send( ply );	if (ply:HasOddity ("statusdirty")) then elseply:GiveOddity("statusdirty" ); endply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); end						if ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- BURN FOODnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: Shit, I've harvested it wrong and wasted resources."  ); net.Send( ply );		self:Remove();	ply:GiveItem( "smokeleafseed" );ply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); return end					if ( math.random(1, 2 + ( ply:Botanism()) + ( ply:BotanismBuff())) == 2 ) then -- BURN FOODif (ply:HasItem ("clothesheadgasmaske")) thenif  (ply:HasItem ("oxygentank1")) or (ply:HasItem ("oxygentank2")) or (ply:HasItem ("oxygentank3")) or (ply:HasItem ("oxygentank4")) or (ply:HasItem ("oxygentank5")) or (ply:HasItem ("oxygentank6")) or (ply:HasItem ("oxygentank7")) or (ply:HasItem ("oxygentank8")) or (ply:HasItem ("oxygentank9")) or (ply:HasItem ("oxygentank10"))   thenply:GiveItem( "smokeleaf" );ply:GiveItem( "smokeleafseed" );self:Remove();net.Start( "nAddChat" ); net.WriteVector( Vector( 0, 200, 0 ) ); net.WriteString( "[INCIDENT]: My gasmask protected me from the addictive fumes."  ); net.Send( ply );end return endnet.Start( "nAddChat" ); net.WriteVector( Vector( 200, 93, 0 ) ); net.WriteString( "[INCIDENT]: I've inhaled the fumes by incident. Oh no."  ); net.Send( ply );		if (ply:HasOddity ("statusaddicted")) then elseply:GiveOddity("statusaddicted" ); endply:EmitSound( "buttons/combine_button2.wav", 100, math.random( 90, 110 ) ); end				ply:GiveItem( "smokeleaf" );				ply:GiveItem( "smokeleafseed" );			self:Remove();	end	endfunction ENT:CanPhysgun()		return false;	end	function nCombineRationTooHeavy( len )				GAMEMODE:AddChat( Color( 200, 0, 0, 255 ), "CombineControl.ChatNormal", "That's too heavy for you to carry.", { CB_ALL, CB_IC } );			end	net.Receive( "nCombineRationTooHeavy", nCombineRationTooHeavy );